# Blueprint: Cloud Storage Architecture

เอกสารนี้คือพิมพ์เขียว (Blueprint) สำหรับสถาปัตยกรรมของ **Google Cloud Storage** ซึ่งเป็นคลังเก็บข้อมูลส่วนกลางสำหรับไฟล์ทั้งหมดใน MESY Universe

## 1. แนวคิดหลัก (Core Concept)

- **Centralized Asset Hub:** เป็นศูนย์กลางการจัดเก็บไฟล์ทุกประเภท (รูปภาพ, วิดีโอ, โมเดล 3 มิติ, เสียง) เพื่อให้ง่ายต่อการจัดการ, เข้าถึง, และควบคุมเวอร์ชัน
- **Scalable & Secure:** ออกแบบโครงสร้างให้สามารถรองรับการขยายตัวของข้อมูลจำนวนมหาศาลในอนาคต และสามารถกำหนดสิทธิ์การเข้าถึงได้อย่างละเอียดและปลอดภัย
- **Optimized for Delivery:** จัดระเบียบไฟล์เพื่อประสิทธิภาพสูงสุดในการนำส่งข้อมูลไปยังผู้ใช้ ไม่ว่าจะเป็นการสตรีมวิดีโอ, การโหลดโมเดล 3 มิติ, หรือการแสดงรูปภาพ

## 2. โครงสร้าง Bucket และโฟลเดอร์ (Bucket & Folder Structure)

เราจะใช้ Bucket หลักเพียงอันเดียวชื่อ `mesy-universe-assets` (ตัวอย่าง) และแบ่งโครงสร้างโฟลเดอร์ภายในดังนี้:

- **/public/**
  - ** назначение:** สำหรับเก็บไฟล์ที่สามารถเข้าถึงได้สาธารณะ ไม่จำเป็นต้องมีการยืนยันตัวตน
  - **ตัวอย่าง:**
    - `/public/images/ui-icons/` (ไอคอน, โลโก้)
    - `/public/audio/sound-effects/` (เสียงประกอบ UI)

- **/assets/**
  - ** назначение:** สำหรับเก็บทรัพย์สินดิจิทัลหลัก (Core Digital Assets) ที่ใช้ในจักรวาล MESY เช่น โมเดล 3 มิติมาตรฐาน, Textures, หรือ Blueprints ที่พัฒนาโดยทีมงาน
  - **ตัวอย่าง:**
    - `/assets/3d-models/environments/`
    - `/assets/textures/nature/`

- **/mesy-shop/**
  - ** назначение:** สำหรับเก็บข้อมูลที่เกี่ยวข้องกับสินค้าใน Shopping Hub
  - **โครงสร้างย่อย:**
    - `/mesy-shop/products/{productID}/images/` (รูปภาพโปรโมทสินค้า)
    - `/mesy-shop/products/{productID}/digital-assets/` (ไฟล์สินค้าดิจิทัลที่ลูกค้าจะได้รับ เช่น .fbx, .mp3)

- **/member-uploads/ (MESY Cloud)**
  - ** назначение:** เป็นพื้นที่จัดเก็บไฟล์ส่วนตัวสำหรับสมาชิกแต่ละคน (เปรียบเสมือน "MESY Cloud" หรือ Google Drive ส่วนตัว) สิทธิ์การเข้าถึงจะถูกจำกัดเฉพาะเจ้าของบัญชีเท่านั้น
  - **โครงสร้างย่อย (ต่อ Member ID):**
    - `/member-uploads/{memberID}/images/` (รูปภาพที่อัปโหลดในโซเชียล, โปรไฟล์)
    - `/member-uploads/{memberID}/avatars/` (ไฟล์รูป Avatar ที่สร้างหรืออัปโหลด)
    - `/member-uploads/{memberID}/creations/` (ผลงานที่สร้างจาก AI Hub เช่น รูปภาพ, เพลง)
    - `/member-uploads/{memberID}/wallet-data/` (อาจใช้เก็บเอกสารที่เกี่ยวข้องกับ Wallet หรือการยืนยันตัวตน)
    - `/member-uploads/{memberID}/private/` (สำหรับไฟล์ส่วนตัวอื่นๆ)

## 3. การเชื่อมต่อกับบริการอื่น

- **Cloud Functions:** สามารถใช้ Cloud Functions ในการทำ Automation ต่างๆ เช่น การสร้าง Thumbnail ของรูปภาพที่อัปโหลด, การแปลงไฟล์เสียง, หรือการตรวจสอบไฟล์ที่อัปโหลด
- **Compute Engine:** สามารถใช้ VM ใน Compute Engine เพื่อประมวลผลไฟล์ขนาดใหญ่ เช่น การเรนเดอร์วิดีโอ หรือการเทรนโมเดล AI โดยใช้ข้อมูลจาก Storage
- **Firebase Authentication:** ใช้ UID ของผู้ใช้ในการกำหนดสิทธิ์การเข้าถึงโฟลเดอร์ใน `/member-uploads/` เพื่อให้มั่นใจว่าสมาชิกจะเข้าถึงได้เฉพาะข้อมูลของตนเอง
